(function(){function aR(){}function a6(a){var b=aW.call(arguments,1);return function(){return a.apply(this,b)}}function aX(a,b){if(!b){throw Error("prayer failed: "+a)}}function a2(a){aX("a direction was passed",a===aQ||a===aV)}function aT(q,f,k,a){function B(){p=bb;var b=t.selection?"$"+t.selection.latex()+"$":"";z.select(b)}function d(){j.detach()}var t,j,h,p,u,A,z,y=q.contents().detach();return k||q.addClass("mathquill-rendered-math"),f.jQ=q.attr(aH,f.id),f.revert=function(){q.empty().unbind(".mathquill").removeClass("mathquill-rendered-math mathquill-editable mathquill-textbox").append(y)},t=f.cursor=aM(f),f.renderLatex(y.text()),j=f.textarea=a5('<span class="textarea"><textarea></textarea></span>'),h=j.children(),f.selectionChanged=function(){p===bb&&(p=setTimeout(B)),ao(q[0])},q.bind("selectstart.mathquill",function(b){b.target!==h[0]&&b.preventDefault(),b.stopPropagation()}),A=t.blink,q.bind("mousedown.mathquill",function(g){function b(i){return t.seek(a5(i.target),i.pageX,i.pageY),(t[aQ]!==u[aQ]||t.parent!==u.parent)&&t.selectFrom(u),!1}function c(i){return delete i.target,b(i)}function e(i){u=bb,t.blink=A,t.selection||(a?t.show():j.detach()),q.unbind("mousemove",b),a5(i.target.ownerDocument).unbind("mousemove",c).unbind("mouseup",e)}return setTimeout(function(){h.focus()}),t.blink=aR,t.seek(a5(g.target),g.pageX,g.pageY),u=a7(t.parent,t[aQ],t[aV]),a||q.prepend(j),q.mousemove(b),a5(g.target.ownerDocument).mousemove(c).mouseup(e),!1}),a?(z=a3(h,{container:q,key:function(b,c){t.parent.bubble("onKey",b,c)},text:function(b){t.parent.bubble("onText",b)},cut:function(b){t.selection&&setTimeout(function(){t.prepareEdit(),t.parent.bubble("redraw")}),b.stopPropagation()},paste:function(b){b="$"===b.slice(0,1)&&"$"===b.slice(-1)?b.slice(1,-1):"\\text{"+b+"}",t.writeLatex(b).show()}}),q.prepend(j),q.addClass("mathquill-editable"),k&&q.addClass("mathquill-textbox"),h.focus(function(b){t.parent||t.insAtRightEnd(f),t.parent.jQ.addClass("hasCursor"),t.selection?(t.selection.jQ.removeClass("blur"),setTimeout(f.selectionChanged)):t.show(),b.stopPropagation()}).blur(function(b){t.hide().parent.blur(),t.selection&&t.selection.jQ.addClass("blur"),b.stopPropagation()}),q.bind("focus.mathquill blur.mathquill",function(b){h.trigger(b)}).blur(),bb):(z=a3(h,{container:q}),q.bind("cut paste",!1).bind("copy",B).prepend('<span class="selectable">$'+f.latex()+"$</span>"),h.blur(function(){t.clearSelection(),setTimeout(d)}),bb)}function aS(a,b,c){return a8(at,{ctrlSeq:a,htmlTemplate:"<"+b+" "+c+">&0</"+b+">"})}var bb,aW,a8,a3,aZ,aQ,aV,a5,a7,aY,a4,a9,aP,aO,aN,a1,a0,aU,aL,am,aC,ak,ar,aB,ao,az,aE,al,aj,aK,aD,av,aG,bd,ag,aq,ay,an,ai,aw,at,ap,ax,ad,ab,ac,au,ah,af,ba,aa,aI,aM,aF,aA=window.jQuery,aJ="mathquill-command-id",aH="mathquill-block-id",bc=Math.min;Math.max,aW=[].slice,a8=function(d,h,j){function c(a){return"object"==typeof a}function g(a){return"function"==typeof a}function f(){}function b(n,q){function i(){var l=new a;return g(l.init)&&l.init.apply(l,arguments),l}function a(){}var e,m,k;return q===j&&(q=n,n=Object),i.Bare=a,e=f[d]=n[d],m=a[d]=i[d]=new f,m.constructor=i,i.mixin=function(l){return a[d]=i[d]=b(i,l)[d],i},(i.open=function(l){if(k={},g(l)?k=l.call(i,m,e,i,n):c(l)&&(k=l),c(k)){for(var o in k){h.call(k,o)&&(m[o]=k[o])}}return g(m.init)||(m.init=n),i})(q)}return b}("prototype",{}.hasOwnProperty),a3=function(){function a(d){var h,c=d.which||d.keyCode,g=b[c],f=[];return d.ctrlKey&&f.push("Ctrl"),d.originalEvent&&d.originalEvent.metaKey&&f.push("Meta"),d.altKey&&f.push("Alt"),d.shiftKey&&f.push("Shift"),h=g||String.fromCharCode(c),f.length||g?(f.push(h),f.join("-")):h}var b={8:"Backspace",9:"Tab",10:"Enter",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Esc",32:"Spacebar",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",45:"Insert",46:"Del",144:"NumLock"};return function(H,M){function D(c){K=c,clearTimeout(L),L=setTimeout(c)}function C(c){K(),K=aR,clearTimeout(L),z.val(c),c&&z[0].select()}function T(){var c=z[0];return"selectionStart" in c?c.selectionStart!==c.selectionEnd:!1}function G(c){var d=z.val();z.val(""),d&&c(d)}function R(){O(a(E),E)}function N(c){E=c,e=null,R()}function J(c){E&&e&&R(),e=c,D(B)}function B(){T()||G(I)}function F(){E=e=null}function P(){z.focus(),D(Q)}function Q(){G(S)}var I,O,S,A,z,t,L,K,E=null,e=null;return M||(M={}),I=M.text||aR,O=M.key||aR,S=M.paste||aR,A=M.cut||aR,z=aA(H),t=aA(M.container||z),K=aR,t.bind("keydown keypress input keyup focusout paste",function(){K()}),t.bind({keydown:N,keypress:J,focusout:F,cut:A,paste:P}),{select:C}}}(),aZ=a8(function(d,h,c){function g(a,i){throw a=a?"'"+a+"'":"EOF","Parse Error: "+i+" at "+a}var f,b,j;d.init=function(a){this._=a},d.parse=function(a){function i(k,l){return l}return this.skip(j)._(a,i,g)},d.or=function(a){aX("or is passed a parser",a instanceof c);var i=this;return c(function(m,e,l){function k(){return a._(m,e,l)}return i._(m,e,k)})},d.then=function(a){var i=this;return c(function(l,k,e){function m(p,n){var q=a instanceof c?a:a(n);return aX("a parser is returned",q instanceof c),q._(p,k,e)}return i._(l,m,e)})},d.many=function(){var a=this;return c(function(o,p){function k(e,i){return o=e,l.push(i),!0}function m(){return !1}for(var l=[];a._(o,k,m);){}return p(o,l)})},d.times=function(a,i){2>arguments.length&&(i=a);var k=this;return c(function(t,e,z){function x(l,o){return y.push(o),t=l,!0}function n(l,o){return v=o,t=l,!1}function w(){return !1}var v,q,y=[],m=!0;for(q=0;a>q;q+=1){if(m=k._(t,x,n),!m){return z(t,v)}}for(;i>q&&m;q+=1){m=k._(t,x,w)}return e(t,y)})},d.result=function(a){return this.then(b(a))},d.atMost=function(a){return this.times(0,a)},d.atLeast=function(a){var i=this;return i.times(a).then(function(e){return i.many().map(function(k){return e.concat(k)})})},d.map=function(a){return this.then(function(i){return b(a(i))})},d.skip=function(a){return this.then(function(i){return a.result(i)})},this.string=function(a){var i=a.length,k="expected '"+a+"'";return c(function(l,n,m){var e=l.slice(0,i);return e===a?n(l.slice(i),e):m(l,k)})},f=this.regex=function(a){aX("regexp parser is anchored","^"===(""+a).charAt(1));var i="expected "+a;return c(function(o,k,m){var l,e=a.exec(o);return e?(l=e[0],k(o.slice(l.length),l)):m(o,i)})},b=c.succeed=function(a){return c(function(i,k){return k(i,a)})},c.fail=function(a){return c(function(l,m,k){return k(l,a)})},c.letter=f(/^[a-z]/i),c.letters=f(/^[a-z]*/i),c.digit=f(/^[0-9]/),c.digits=f(/^[0-9]*/),c.whitespace=f(/^\s+/),c.optWhitespace=f(/^\s*/),c.any=c(function(a,i,k){return a?i(a.slice(1),a.charAt(0)):k(a,"expected any character")}),c.all=c(function(a,i){return i("",a)}),j=c.eof=c(function(a,i,k){return a?k(a,"expected EOF"):i(a,a)})}),aQ=-1,aV=1,a5=a8(aA,function(a){a.insDirOf=function(b,c){return b===aQ?this.insertBefore(c.first()):this.insertAfter(c.last())},a.insAtDirEnd=function(b,c){return b===aQ?this.prependTo(c):this.appendTo(c)}}),a7=a8(function(a){a.parent=0,a[aQ]=0,a[aV]=0,a.init=function(b,c,d){this.parent=b,this[aQ]=c,this[aV]=d}}),aY=a8(function(a){a[aQ]=0,a[aV]=0,a.parent=0,a.init=function(){this.ends={},this.ends[aQ]=0,this.ends[aV]=0},a.children=function(){return a4(this.ends[aQ],this.ends[aV])},a.eachChild=function(b){return this.children().each(b)},a.foldChildren=function(b,c){return this.children().fold(b,c)},a.adopt=function(b,c,d){return a4(this,this).adopt(b,c,d),this},a.disown=function(){return a4(this,this).disown(),this}}),a4=a8(function(a){function b(d,f,c){aX("a parent is always present",d),aX("leftward is properly set up",function(){return f?f[aV]===c&&f.parent===d:d.ends[aQ]===c}()),aX("rightward is properly set up",function(){return c?c[aQ]===f&&c.parent===d:d.ends[aV]===f}())}a.init=function(c,d){aX("no half-empty fragments",!c==!d),this.ends={},c&&(aX("left end node is passed to Fragment",c instanceof aY),aX("right end node is passed to Fragment",d instanceof aY),aX("leftEnd and rightEnd have the same parent",c.parent===d.parent),this.ends[aQ]=c,this.ends[aV]=d)},a.adopt=function(e,h,d){var g,f,c;return b(e,h,d),g=this,g.disowned=!1,(f=g.ends[aQ])?(c=g.ends[aV],h||(e.ends[aQ]=f),d?d[aQ]=c:e.ends[aV]=c,g.ends[aV][aV]=d,g.each(function(i){i[aQ]=h,i.parent=e,h&&(h[aV]=i),h=i}),g):this},a.disown=function(){var d,f,c=this,e=c.ends[aQ];return !e||c.disowned?c:(c.disowned=!0,d=c.ends[aV],f=e.parent,b(f,e[aQ],e),b(f,d,d[aV]),e[aQ]?e[aQ][aV]=d[aV]:f.ends[aQ]=d[aV],d[aV]?d[aV][aQ]=e[aQ]:f.ends[aV]=e[aQ],c)},a.each=function(c){var d=this,f=d.ends[aQ];if(!f){return d}for(;f!==d.ends[aV][aV]&&c.call(d,f)!==!1;f=f[aV]){}return d},a.fold=function(c,d){return this.each(function(e){c=d.call(this,c,e)}),c}}),a9=function(){var a=0;return function(){return a+=1}}(),aP=a8(aY,function(a,b){a.init=function(){b.init.call(this),this.id=a9(),aP[this.id]=this},a.toString=function(){return"[MathElement "+this.id+"]"},a.bubble=function(d){var f,g,c=aW.call(arguments,1);for(f=this;f&&(g=f[d]&&f[d].apply(f,c),g!==!1);f=f.parent){}return this},a.postOrder=function(d){var f,g=aW.call(arguments,1);"string"==typeof d&&(f=d,d=function(e){f in e&&e[f].apply(e,g)}),function c(h){h.eachChild(c),d(h)}(this)},a.jQ=a5(),a.jQadd=function(c){this.jQ=this.jQ.add(c)},this.jQize=function(c){var d=a5(c);return d.find("*").andSelf().each(function(){var f=a5(this),g=f.attr("mathquill-command-id"),h=f.attr("mathquill-block-id");g&&aP[g].jQadd(f),h&&aP[h].jQadd(f)}),d},a.finalizeInsert=function(){var c=this;c.postOrder("finalizeTree"),c.postOrder("blur"),c.postOrder("respace"),c[aV].respace&&c[aV].respace(),c[aQ].respace&&c[aQ].respace(),c.postOrder("redraw"),c.bubble("redraw")}}),aO=a8(aP,function(b,a){b.init=function(c,f,g){var d=this;a.init.call(d),d.ctrlSeq||(d.ctrlSeq=c),f&&(d.htmlTemplate=f),g&&(d.textTemplate=g)},b.replaces=function(c){c.disown(),this.replacedFragment=c},b.isEmpty=function(){return this.foldChildren(!0,function(c,d){return c&&d.isEmpty()})},b.parser=function(){var c=aI.block,d=this;return c.times(d.numBlocks()).map(function(e){d.blocks=e;for(var f=0;e.length>f;f+=1){e[f].adopt(d,d.ends[aV],0)}return d})},b.createLeftOf=function(c){var d=this,f=d.replacedFragment;d.createBlocks(),aP.jQize(d.html()),f&&(f.adopt(d.ends[aQ],0,0),f.jQ.appendTo(d.ends[aQ].jQ)),c.jQ.before(d.jQ),c[aQ]=d.adopt(c.parent,c[aQ],c[aV]),d.finalizeInsert(c),d.placeCursor(c)},b.createBlocks=function(){var d,g,h=this,c=h.numBlocks(),f=h.blocks=Array(c);for(d=0;c>d;d+=1){g=f[d]=a1(),g.adopt(h,h.ends[aV],0)}},b.respace=aR,b.placeCursor=function(c){c.insAtRightEnd(this.foldChildren(this.ends[aQ],function(d,f){return d.isEmpty()?d:f}))},b.remove=function(){return this.disown(),this.jQ.remove(),this.postOrder(function(c){delete aP[c.id]}),this},b.numBlocks=function(){var c=this.htmlTemplate.match(/&\d+/g);return c?c.length:0},b.html=function(){var f,j,d,h=this,g=h.blocks,c=" mathquill-command-id="+h.id,k=h.htmlTemplate.match(/<[^<>]+>|[^<>]+/g);for(aX("no unmatched angle brackets",k.join("")===this.htmlTemplate),f=0,j=k[0];j;f+=1,j=k[f]){if("/>"===j.slice(-2)){k[f]=j.slice(0,-2)+c+"/>"}else{if("<"===j.charAt(0)){aX("not an unmatched top-level close tag","/"!==j.charAt(1)),k[f]=j.slice(0,-1)+c+">",d=1;do{f+=1,j=k[f],aX("no missing close tags",j),"</"===j.slice(0,2)?d-=1:"<"===j.charAt(0)&&"/>"!==j.slice(-2)&&(d+=1)}while(d>0)}}}return k.join("").replace(/>&(\d+)/g,function(i,l){return" mathquill-block-id="+g[l].id+">"+g[l].join("html")})},b.latex=function(){return this.foldChildren(this.ctrlSeq,function(c,d){return c+"{"+(d.latex()||" ")+"}"})},b.textTemplate=[""],b.text=function(){var c=this,d=0;return c.foldChildren(c.textTemplate[d],function(g,e){d+=1;var f=e.text();return g&&"("===c.textTemplate[d]&&"("===f[0]&&")"===f.slice(-1)?g+f.slice(1,-1)+c.textTemplate[d]:g+e.text()+(c.textTemplate[d]||"")})}}),aN=a8(aO,function(a,b){a.init=function(d,f,c){c||(c=d&&d.length>1?d.slice(1):d),b.init.call(this,d,f,[c])},a.parser=function(){return aZ.succeed(this)},a.numBlocks=function(){return 0},a.replaces=function(c){c.remove()},a.createBlocks=aR,a.latex=function(){return this.ctrlSeq},a.text=function(){return this.textTemplate},a.placeCursor=aR,a.isEmpty=function(){return !0}}),a1=a8(aP,function(a){a.join=function(b){return this.foldChildren("",function(c,d){return c+d[b]()})},a.latex=function(){return this.join("latex")},a.text=function(){return this.ends[aQ]===this.ends[aV]?this.ends[aQ].text():"("+this.join("text")+")"},a.isEmpty=function(){return 0===this.ends[aQ]&&0===this.ends[aV]},a.write=function(c,d,f){var b;b=d.match(/^[a-eg-zA-Z]$/)?ad(d):(b=aC[d]||ak[d])?b(d):ab(d),f&&b.replaces(f),b.createLeftOf(c)},a.focus=function(){return this.jQ.addClass("hasCursor"),this.jQ.removeClass("empty"),this},a.blur=function(){return this.jQ.removeClass("hasCursor"),this.isEmpty()&&this.jQ.addClass("empty"),this}}),a0=a8(a4,function(a,b){a.init=function(c,d){b.init.call(this,c,d||c),this.jQ=this.fold(a5(),function(f,g){return g.jQ.add(f)})},a.latex=function(){return this.fold("",function(c,d){return c+d.latex()})},a.remove=function(){return this.jQ.remove(),this.each(function(c){c.postOrder(function(d){delete aP[d.id]})}),this.disown()}}),aU=a8(a1,function(a,b){a.latex=function(){return b.latex.call(this).replace(/(\\[a-z]+) (?![a-z])/gi,"$1")},a.text=function(){return this.foldChildren("",function(c,d){return c+d.text()})},a.renderLatex=function(c){var d=this.jQ;d.children().slice(1).remove(),this.ends[aQ]=this.ends[aV]=0,delete this.cursor.selection,this.cursor.insAtRightEnd(this).writeLatex(c)},a.onKey=function(c,d){var f;switch(c){case"Ctrl-Shift-Backspace":case"Ctrl-Backspace":for(;this.cursor[aQ]||this.cursor.selection;){this.cursor.backspace()}break;case"Shift-Backspace":case"Backspace":this.cursor.backspace();break;case"Esc":case"Tab":case"Spacebar":if(f=this.cursor.parent,f===this.cursor.root){return"Spacebar"===c&&d.preventDefault(),bb}this.cursor.prepareMove(),f[aV]?this.cursor.insAtLeftEnd(f[aV]):this.cursor.insRightOf(f.parent);break;case"Shift-Tab":case"Shift-Esc":case"Shift-Spacebar":if(f=this.cursor.parent,f===this.cursor.root){return"Shift-Spacebar"===c&&d.preventDefault(),bb}this.cursor.prepareMove(),f[aQ]?this.cursor.insAtRightEnd(f[aQ]):this.cursor.insLeftOf(f.parent);break;case"Enter":break;case"End":this.cursor.prepareMove().insAtRightEnd(this.cursor.parent);break;case"Ctrl-End":this.cursor.prepareMove().insAtRightEnd(this);break;case"Shift-End":for(;this.cursor[aV];){this.cursor.selectRight()}break;case"Ctrl-Shift-End":for(;this.cursor[aV]||this.cursor.parent!==this;){this.cursor.selectRight()}break;case"Home":this.cursor.prepareMove().insAtLeftEnd(this.cursor.parent);break;case"Ctrl-Home":this.cursor.prepareMove().insAtLeftEnd(this);break;case"Shift-Home":for(;this.cursor[aQ];){this.cursor.selectLeft()}break;case"Ctrl-Shift-Home":for(;this.cursor[aQ]||this.cursor.parent!==this;){this.cursor.selectLeft()}break;case"Left":this.cursor.moveLeft();break;case"Shift-Left":this.cursor.selectLeft();break;case"Ctrl-Left":break;case"Right":this.cursor.moveRight();break;case"Shift-Right":this.cursor.selectRight();break;case"Ctrl-Right":break;case"Up":this.cursor.moveUp();break;case"Down":this.cursor.moveDown();break;case"Shift-Up":if(this.cursor[aQ]){for(;this.cursor[aQ];){this.cursor.selectLeft()}}else{this.cursor.selectLeft()}case"Shift-Down":if(this.cursor[aV]){for(;this.cursor[aV];){this.cursor.selectRight()}}else{this.cursor.selectRight()}case"Ctrl-Up":break;case"Ctrl-Down":break;case"Ctrl-Shift-Del":case"Ctrl-Del":for(;this.cursor[aV]||this.cursor.selection;){this.cursor.deleteForward()}break;case"Shift-Del":case"Del":this.cursor.deleteForward();break;case"Meta-A":case"Ctrl-A":if(this!==this.cursor.root){return}for(this.cursor.prepareMove().insAtRightEnd(this);this.cursor[aQ];){this.cursor.selectLeft()}break;default:return !1}return d.preventDefault(),!1},a.onText=function(c){return this.cursor.write(c),!1}}),aL=a8(aO,function(a,b){a.init=function(c){b.init.call(this,"$"),this.cursor=c},a.htmlTemplate='<span class="mathquill-rendered-math">&0</span>',a.createBlocks=function(){this.ends[aQ]=this.ends[aV]=aU(),this.blocks=[this.ends[aQ]],this.ends[aQ].parent=this,this.ends[aQ].cursor=this.cursor,this.ends[aQ].write=function(c,d,f){"$"!==d?a1.prototype.write.call(this,c,d,f):this.isEmpty()?(c.insRightOf(this.parent).backspace().show(),ab("\\$","$").createLeftOf(c)):c[aV]?c[aQ]?a1.prototype.write.call(this,c,d,f):c.insLeftOf(this.parent):c.insRightOf(this.parent)}},a.latex=function(){return"$"+this.ends[aQ].latex()+"$"}}),am=a8(a1,function(a){a.renderLatex=function(A){var w,k,p,b,B,z,j,y,q,v,x,l=this,u=l.cursor;if(l.jQ.children().slice(1).remove(),l.ends[aQ]=l.ends[aV]=0,delete u.selection,u.show().insAtRightEnd(l),w=aZ.regex,k=aZ.string,p=aZ.eof,b=aZ.all,B=k("$").then(aI).skip(k("$").or(p)).map(function(c){var d,f=aL(u);return f.createBlocks(),d=f.ends[aQ],c.children().adopt(d,0,0),f}),z=k("\\$").result("$"),j=z.or(w(/^[^$]/)).map(ab),y=B.or(j).many(),q=y.skip(p).or(b.result(!1)).parse(A)){for(v=0;q.length>v;v+=1){q[v].adopt(l,l.ends[aV],0)}x=l.join("html"),aP.jQize(x).appendTo(l.jQ),this.finalizeInsert()}},a.onKey=function(b){"Spacebar"!==b&&"Shift-Spacebar"!==b&&aU.prototype.onKey.apply(this,arguments)},a.onText=aU.prototype.onText,a.write=function(c,d,f){if(f&&f.remove(),"$"===d){aL(c).createLeftOf(c)}else{var b;"<"===d?b="&lt;":">"===d&&(b="&gt;"),ab(d,b).createLeftOf(c)}}}),aC={},ak={},ao=aR,az=document.createElement("div"),aE=az.style,al={transform:1,WebkitTransform:1,MozTransform:1,OTransform:1,msTransform:1};for(aj in al){if(aj in aE){aB=aj;break}}aB?ar=function(a,b,c){a.css(aB,"scale("+b+","+c+")")}:"filter" in aE?(ao=function(a){a.className=a.className},ar=function(b,f,g){function a(){b.css("marginRight",(d.width()-1)*(f-1)/f+"px")}var d,c;f/=1+(g-1)/2,b.css("fontSize",g+"em"),b.hasClass("matrixed-container")||b.addClass("matrixed-container").wrapInner('<span class="matrixed"></span>'),d=b.children().css("filter","progid:DXImageTransform.Microsoft.Matrix(M11="+f+",SizingMethod='auto expand')"),a(),c=setInterval(a),a5(window).load(function(){clearTimeout(c),a()})}):ar=function(a,b,c){a.css("fontSize",c+"em")},aK=a8(aO,function(a,b){a.init=function(d,e,c){b.init.call(this,d,"<"+e+" "+c+">&0</"+e+">")}}),ak.mathrm=a6(aK,"\\mathrm","span",'class="roman font"'),ak.mathit=a6(aK,"\\mathit","i",'class="font"'),ak.mathbf=a6(aK,"\\mathbf","b",'class="font"'),ak.mathsf=a6(aK,"\\mathsf","span",'class="sans-serif font"'),ak.mathtt=a6(aK,"\\mathtt","span",'class="monospace font"'),ak.underline=a6(aK,"\\underline","span",'class="non-leaf underline"'),ak.overline=ak.bar=a6(aK,"\\overline","span",'class="non-leaf overline"'),aD=a8(aO,function(a,b){a.init=function(d,e,c){b.init.call(this,d,"<"+e+' class="non-leaf">&0</'+e+">",[c])},a.finalizeTree=function(){function c(d){var f=this.parent,g=d;do{if(g[aV]){return d.insLeftOf(f),!1}g=g.parent.parent}while(g!==f);return d.insRightOf(f),!1}aX("SupSub is only _ and ^","^"===this.ctrlSeq||"_"===this.ctrlSeq),"_"===this.ctrlSeq?(this.down=this.ends[aQ],this.ends[aQ].up=c):(this.up=this.ends[aQ],this.ends[aQ].down=c)},a.latex=function(){var c=this.ends[aQ].latex();return 1===c.length?this.ctrlSeq+c:this.ctrlSeq+"{"+(c||" ")+"}"},a.redraw=function(){this[aQ]&&this[aQ].respace(),this[aQ] instanceof aD||(this.respace(),!this[aV]||this[aV] instanceof aD||this[aV].respace())},a.respace=function(){if("\\int "===this[aQ].ctrlSeq||this[aQ] instanceof aD&&this[aQ].ctrlSeq!=this.ctrlSeq&&this[aQ][aQ]&&"\\int "===this[aQ][aQ].ctrlSeq?this.limit||(this.limit=!0,this.jQ.addClass("limit")):this.limit&&(this.limit=!1,this.jQ.removeClass("limit")),this.respaced=this[aQ] instanceof aD&&this[aQ].ctrlSeq!=this.ctrlSeq&&!this[aQ].respaced,this.respaced){var c=+this.jQ.css("fontSize").slice(0,-2),d=this[aQ].jQ.outerWidth(),f=this.jQ.outerWidth();this.jQ.css({left:(this.limit&&"_"===this.ctrlSeq?-0.25:0)-d/c+"em",marginRight:0.1-bc(f,d)/c+"em"})}else{this.limit&&"_"===this.ctrlSeq?this.jQ.css({left:"-.25em",marginRight:""}):this.jQ.css({left:"",marginRight:""})}return this[aV] instanceof aD&&this[aV].respace(),this}}),ak.subscript=ak._=a6(aD,"_","sub","_"),ak.superscript=ak.supscript=ak["^"]=a6(aD,"^","sup","**"),av=ak.frac=ak.dfrac=ak.cfrac=ak.fraction=a8(aO,function(a){a.ctrlSeq="\\frac",a.htmlTemplate='<span class="fraction non-leaf"><span class="numerator">&0</span><span class="denominator">&1</span><span style="display:inline-block;width:0">&nbsp;</span></span>',a.textTemplate=["(","/",")"],a.finalizeTree=function(){this.up=this.ends[aV].up=this.ends[aQ],this.down=this.ends[aQ].down=this.ends[aV]}}),aG=ak.over=aC["/"]=a8(av,function(a,b){a.createLeftOf=function(c){if(!this.replacedFragment){for(var d=c[aQ];d&&!(d instanceof ah||d instanceof at||d instanceof ba||",;:".split("").indexOf(d.ctrlSeq)>-1);){d=d[aQ]}d instanceof ba&&d[aV] instanceof aD&&(d=d[aV],d[aV] instanceof aD&&d[aV].ctrlSeq!=d.ctrlSeq&&(d=d[aV])),d!==c[aQ]&&(this.replaces(a0(d[aV]||c.parent.ends[aQ],c[aQ])),c[aQ]=d)}b.createLeftOf.call(this,c)}}),bd=ak.sqrt=ak["√"]=a8(aO,function(a,b){a.ctrlSeq="\\sqrt",a.htmlTemplate='<span class="non-leaf"><span class="scaled sqrt-prefix">&radic;</span><span class="non-leaf sqrt-stem">&0</span></span>',a.textTemplate=["sqrt(",")"],a.parser=function(){return aI.optBlock.then(function(c){return aI.block.map(function(d){var f=ag();return f.blocks=[c,d],c.adopt(f,0,0),d.adopt(f,c,0),f})}).or(b.parser.call(this))},a.redraw=function(){var c=this.ends[aV].jQ;ar(c.prev(),1,c.innerHeight()/+c.css("fontSize").slice(0,-2)-0.1)}}),ak.vec=a8(aO,function(a){a.ctrlSeq="\\vec",a.htmlTemplate='<span class="non-leaf"><span class="vector-prefix">&rarr;</span><span class="vector-stem">&0</span></span>',a.textTemplate=["vec(",")"]}),ag=ak.nthroot=a8(bd,function(a){a.htmlTemplate='<sup class="nthroot non-leaf">&0</sup><span class="scaled"><span class="sqrt-prefix scaled">&radic;</span><span class="sqrt-stem non-leaf">&1</span></span>',a.textTemplate=["sqrt[","](",")"],a.latex=function(){return"\\sqrt["+this.ends[aQ].latex()+"]{"+this.ends[aV].latex()+"}"}}),aq=a8(aO,function(a,b){a.init=function(d,f,c,e){b.init.call(this,"\\left"+c,'<span class="non-leaf"><span class="scaled paren">'+d+'</span><span class="non-leaf">&0</span><span class="scaled paren">'+f+"</span></span>",[d,f]),this.end="\\right"+e},a.jQadd=function(){b.jQadd.apply(this,arguments);var c=this.jQ;this.bracketjQs=c.children(":first").add(c.children(":last"))},a.latex=function(){return this.ctrlSeq+this.ends[aQ].latex()+this.end},a.redraw=function(){var c=this.ends[aQ].jQ,d=c.outerHeight()/+c.css("fontSize").slice(0,-2);ar(this.bracketjQs,bc(1+0.2*(d-1),1.2),1.05*d)}}),ak.left=a8(aO,function(a){a.parser=function(){var c=aZ.regex,d=aZ.string,f=aZ.succeed,b=aZ.optWhitespace;return b.then(c(/^(?:[([|]|\\\{)/)).then(function(g){"\\"===g.charAt(0)&&(g=g.slice(1));var e=aC[g]();return aI.map(function(h){e.blocks=[h],h.adopt(e,0,0)}).then(d("\\right")).skip(b).then(c(/^(?:[\])|]|\\\})/)).then(function(h){return h.slice(-1)!==e.end.slice(-1)?aZ.fail("open doesn't match close"):f(e)})})}}),ak.right=a8(aO,function(a){a.parser=function(){return aZ.fail("unmatched \\right")}}),ak.lbrace=aC["{"]=a6(aq,"{","}","\\{","\\}"),ak.langle=ak.lang=a6(aq,"&lang;","&rang;","\\langle ","\\rangle "),ay=a8(aq,function(a,b){a.createLeftOf=function(c){c[aV]||!c.parent.parent||c.parent.parent.end!==this.end||this.replacedFragment?b.createLeftOf.call(this,c):c.insRightOf(c.parent.parent)},a.placeCursor=function(c){this.ends[aQ].blur(),c.insRightOf(this)}}),ak.rbrace=aC["}"]=a6(ay,"{","}","\\{","\\}"),ak.rangle=ak.rang=a6(ay,"&lang;","&rang;","\\langle ","\\rangle "),an=function(a,b){a.init=function(c,d){b.init.call(this,c,d,c,d)}},ai=a8(aq,an),ak.lparen=aC["("]=a6(ai,"(",")"),ak.lbrack=ak.lbracket=aC["["]=a6(ai,"[","]"),aw=a8(ay,an),ak.rparen=aC[")"]=a6(aw,"(",")"),ak.rbrack=ak.rbracket=aC["]"]=a6(aw,"[","]"),ak.lpipe=ak.rpipe=aC["|"]=a8(ai,function(a,b){a.init=function(){b.init.call(this,"|","|")},a.createLeftOf=ay.prototype.createLeftOf}),at=aC.$=ak.text=ak.textnormal=ak.textrm=ak.textup=ak.textmd=a8(aO,function(a,b){a.ctrlSeq="\\text",a.htmlTemplate='<span class="text">&0</span>',a.replaces=function(c){c instanceof a0?this.replacedText=c.remove().jQ.text():"string"==typeof c&&(this.replacedText=c)},a.textTemplate=['"','"'],a.parser=function(){var d=this,f=aZ.string,g=aZ.regex,c=aZ.optWhitespace;return c.then(f("{")).then(g(/^[^}]*/)).skip(f("}")).map(function(k){var l,h,j;for(d.createBlocks(),l=d.ends[aQ],h=0;k.length>h;h+=1){j=ab(k.charAt(h)),j.adopt(l,l.ends[aV],0)}return d})},a.createBlocks=function(){this.ends[aQ]=this.ends[aV]=ap(),this.blocks=[this.ends[aQ]],this.ends[aQ].parent=this},a.finalizeInsert=function(){this.ends[aQ].blur=function(){return delete this.blur,this},b.finalizeInsert.call(this)},a.createLeftOf=function(c){if(b.createLeftOf.call(this,this.cursor=c),this.replacedText){for(var d=0;this.replacedText.length>d;d+=1){this.ends[aQ].write(c,this.replacedText.charAt(d))}}}}),ap=a8(a1,function(a,b){a.onKey=function(c){return"Spacebar"===c||"Shift-Spacebar"===c?!1:bb},a.deleteOutOf=function(c,d){this.isEmpty()&&d.insRightOf(this.parent)},a.write=function(d,g,h){var c,f;return h&&h.remove(),"$"!==g?("<"===g?c="&lt;":">"===g&&(c="&gt;"),ab(g,c).createLeftOf(d)):this.isEmpty()?(d.insRightOf(this.parent).backspace(),ab("\\$","$").createLeftOf(d)):d[aV]?d[aQ]?(f=at(),f.replaces(a0(d[aV],this.ends[aV])),d.insRightOf(this.parent),f.adopt=function(){delete this.adopt,this.adopt.apply(this,arguments),this[aQ]=0},f.createLeftOf(d),f[aQ]=this.parent,d.insLeftOf(f)):d.insLeftOf(this.parent):d.insRightOf(this.parent),!1},a.blur=function(){if(this.jQ.removeClass("hasCursor"),this.isEmpty()){var c=this.parent,d=c.cursor;d.parent===this?this.jQ.addClass("empty"):(d.hide(),c.remove(),d[aV]===c?d[aV]=c[aV]:d[aQ]===c&&(d[aQ]=c[aQ]),d.show().parent.bubble("redraw"))}return this},a.focus=function(){var d,f,c,e;return b.focus.call(this),d=this.parent,d[aV].ctrlSeq===d.ctrlSeq?(f=this,c=d.cursor,e=d[aV].ends[aQ],e.eachChild(function(g){g.parent=f,g.jQ.appendTo(f.jQ)}),this.ends[aV]?this.ends[aV][aV]=e.ends[aQ]:this.ends[aQ]=e.ends[aQ],e.ends[aQ][aQ]=this.ends[aV],this.ends[aV]=e.ends[aV],e.parent.remove(),c[aQ]?c.insRightOf(c[aQ]):c.insAtLeftEnd(this),c.parent.bubble("redraw")):d[aQ].ctrlSeq===d.ctrlSeq&&(c=d.cursor,c[aQ]?d[aQ].ends[aQ].focus():c.insAtRightEnd(d[aQ].ends[aQ])),this}}),ak.em=ak.italic=ak.italics=ak.emph=ak.textit=ak.textsl=aS("\\textit","i",'class="text"'),ak.strong=ak.bold=ak.textbf=aS("\\textbf","b",'class="text"'),ak.sf=ak.textsf=aS("\\textsf","span",'class="sans-serif text"'),ak.tt=ak.texttt=aS("\\texttt","span",'class="monospace text"'),ak.textsc=aS("\\textsc","span",'style="font-variant:small-caps" class="text"'),ak.uppercase=aS("\\uppercase","span",'style="text-transform:uppercase" class="text"'),ak.lowercase=aS("\\lowercase","span",'style="text-transform:lowercase" class="text"'),aC["\\"]=a8(aO,function(a,b){a.ctrlSeq="\\",a.replaces=function(c){this._replacedFragment=c.disown(),this.isEmpty=function(){return !1}},a.htmlTemplate='<span class="latex-command-input non-leaf">\\<span>&0</span></span>',a.textTemplate=["\\"],a.createBlocks=function(){b.createBlocks.call(this),this.ends[aQ].focus=function(){return this.parent.jQ.addClass("hasCursor"),this.isEmpty()&&this.parent.jQ.removeClass("empty"),this},this.ends[aQ].blur=function(){return this.parent.jQ.removeClass("hasCursor"),this.isEmpty()&&this.parent.jQ.addClass("empty"),this}},a.createLeftOf=function(c){if(b.createLeftOf.call(this,c),this.cursor=c.insAtRightEnd(this.ends[aQ]),this._replacedFragment){var d=this.jQ[0];this.jQ=this._replacedFragment.jQ.addClass("blur").bind("mousedown mousemove",function(e){return a5(e.target=d).trigger(e),!1}).insertBefore(this.jQ).add(this.jQ)}this.ends[aQ].write=function(f,g,h){h&&h.remove(),g.match(/[a-z]/i)?ab(g).createLeftOf(f):(this.parent.renderCommand(),"\\"===g&&this.isEmpty()||this.parent.parent.write(f,g))}},a.latex=function(){return"\\"+this.ends[aQ].latex()+" "},a.onKey=function(c,d){return"Tab"===c||"Enter"===c||"Spacebar"===c?(this.renderCommand(),d.preventDefault(),!1):bb},a.renderCommand=function(){this.jQ=this.jQ.last(),this.remove(),this[aV]?this.cursor.insLeftOf(this[aV]):this.cursor.insAtRightEnd(this.parent);var c=this.ends[aQ].latex();c||(c="backslash"),this.cursor.insertCmd(c,this._replacedFragment)}}),ax=ak.binom=ak.binomial=a8(aO,function(a){a.ctrlSeq="\\binom",a.htmlTemplate='<span class="paren scaled">(</span><span class="non-leaf"><span class="array non-leaf"><span>&0</span><span>&1</span></span></span><span class="paren scaled">)</span>',a.textTemplate=["choose(",",",")"],a.redraw=function(){var b=this.jQ.eq(1),c=b.outerHeight()/+b.css("fontSize").slice(0,-2),d=this.jQ.filter(".paren");ar(d,bc(1+0.2*(c-1),1.2),1.05*c)}}),ak.choose=a8(ax,function(a){a.createLeftOf=aG.prototype.createLeftOf}),ak.vector=a8(aO,function(a,b){a.ctrlSeq="\\vector",a.htmlTemplate='<span class="array"><span>&0</span></span>',a.latex=function(){return"\\begin{matrix}"+this.foldChildren([],function(c,d){return c.push(d.latex()),c}).join("\\\\")+"\\end{matrix}"},a.text=function(){return"["+this.foldChildren([],function(c,d){return c.push(d.text()),c}).join()+"]"},a.createLeftOf=function(c){b.createLeftOf.call(this,this.cursor=c)},a.onKey=function(d,f){var g,c=this.cursor.parent;if(c.parent===this){if("Enter"===d){return g=a1(),g.parent=this,g.jQ=a5("<span></span>").attr(aH,g.id).insertAfter(c.jQ),c[aV]?c[aV][aQ]=g:this.ends[aV]=g,g[aV]=c[aV],c[aV]=g,g[aQ]=c,this.bubble("redraw").cursor.insAtRightEnd(g),f.preventDefault(),!1}if("Tab"===d&&!c[aV]){return c.isEmpty()?c[aQ]?(this.cursor.insRightOf(this),delete c[aQ][aV],this.ends[aV]=c[aQ],c.jQ.remove(),this.bubble("redraw"),f.preventDefault(),!1):bb:(g=a1(),g.parent=this,g.jQ=a5("<span></span>").attr(aH,g.id).appendTo(this.jQ),this.ends[aV]=g,c[aV]=g,g[aQ]=c,this.bubble("redraw").cursor.insAtRightEnd(g),f.preventDefault(),!1)}if(8===f.which){if(c.isEmpty()){return c[aQ]?(this.cursor.insAtRightEnd(c[aQ]),c[aQ][aV]=c[aV]):(this.cursor.insLeftOf(this),this.ends[aQ]=c[aV]),c[aV]?c[aV][aQ]=c[aQ]:this.ends[aV]=c[aQ],c.jQ.remove(),this.isEmpty()?this.cursor.deleteForward():this.bubble("redraw"),f.preventDefault(),!1}if(!this.cursor[aQ]){return f.preventDefault(),!1}}}}}),ak.editable=a8(aL,function(a,b){a.init=function(){aO.prototype.init.call(this,"\\editable")},a.jQadd=function(){var d,e,c=this;b.jQadd.apply(c,arguments),d=c.ends[aQ].disown(),e=c.jQ.children().detach(),c.ends[aQ]=c.ends[aV]=aU(),c.blocks=[c.ends[aQ]],c.ends[aQ].parent=c,aT(c.jQ,c.ends[aQ],!1,!0),c.cursor=c.ends[aQ].cursor,d.children().adopt(c.ends[aQ],0,0),e.appendTo(c.ends[aQ].jQ),c.ends[aQ].cursor.insAtRightEnd(c.ends[aQ])},a.latex=function(){return this.ends[aQ].latex()},a.text=function(){return this.ends[aQ].text()}}),ak.f=a6(aN,"f",'<var class="florin">&fnof;</var><span style="display:inline-block;width:0">&nbsp;</span>'),ad=a8(aN,function(a,b){a.init=function(c,d){b.init.call(this,c,"<var>"+(d||c)+"</var>")},a.text=function(){var c=this.ctrlSeq;return !this[aQ]||this[aQ] instanceof ad||this[aQ] instanceof ah||(c="*"+c),!this[aV]||this[aV] instanceof ah||"^"===this[aV].ctrlSeq||(c+="*"),c}}),ab=a8(aN,function(a,b){a.init=function(c,d){b.init.call(this,c,"<span>"+(d||c)+"</span>")}}),aC[" "]=a6(ab,"\\:"," "),ak.prime=aC["'"]=a6(ab,"'","&prime;"),ac=a8(aN,function(a,b){a.init=function(c,d){b.init.call(this,c,'<span class="nonSymbola">'+(d||c)+"</span>")}}),ak["@"]=ac,ak["&"]=a6(ac,"\\&","&amp;"),ak["%"]=a6(ac,"\\%","%"),ak.alpha=ak.beta=ak.gamma=ak.delta=ak.zeta=ak.eta=ak.theta=ak.iota=ak.kappa=ak.mu=ak.nu=ak.xi=ak.rho=ak.sigma=ak.tau=ak.chi=ak.psi=ak.omega=a8(ad,function(a,b){a.init=function(c){b.init.call(this,"\\"+c+" ","&"+c+";")}}),ak.phi=a6(ad,"\\phi ","&#981;"),ak.phiv=ak.varphi=a6(ad,"\\varphi ","&phi;"),ak.epsilon=a6(ad,"\\epsilon ","&#1013;"),ak.epsiv=ak.varepsilon=a6(ad,"\\varepsilon ","&epsilon;"),ak.piv=ak.varpi=a6(ad,"\\varpi ","&piv;"),ak.sigmaf=ak.sigmav=ak.varsigma=a6(ad,"\\varsigma ","&sigmaf;"),ak.thetav=ak.vartheta=ak.thetasym=a6(ad,"\\vartheta ","&thetasym;"),ak.upsilon=ak.upsi=a6(ad,"\\upsilon ","&upsilon;"),ak.gammad=ak.Gammad=ak.digamma=a6(ad,"\\digamma ","&#989;"),ak.kappav=ak.varkappa=a6(ad,"\\varkappa ","&#1008;"),ak.rhov=ak.varrho=a6(ad,"\\varrho ","&#1009;"),ak.pi=ak["π"]=a6(ac,"\\pi ","&pi;"),ak.lambda=a6(ac,"\\lambda ","&lambda;"),ak.Upsilon=ak.Upsi=ak.upsih=ak.Upsih=a6(aN,"\\Upsilon ",'<var style="font-family: serif">&upsih;</var>'),ak.Gamma=ak.Delta=ak.Theta=ak.Lambda=ak.Xi=ak.Pi=ak.Sigma=ak.Phi=ak.Psi=ak.Omega=ak.forall=a8(ab,function(a,b){a.init=function(c){b.init.call(this,"\\"+c+" ","&"+c+";")}}),au=a8(aO,function(a){a.init=function(b){this.latex=b},a.createLeftOf=function(b){b.writeLatex(this.latex)},a.parser=function(){var b=aI.parse(this.latex).children();return aZ.succeed(b)}}),ak["¹"]=a6(au,"^1"),ak["²"]=a6(au,"^2"),ak["³"]=a6(au,"^3"),ak["¼"]=a6(au,"\\frac14"),ak["½"]=a6(au,"\\frac12"),ak["¾"]=a6(au,"\\frac34"),ah=a8(aN,function(a,b){a.init=function(d,e,c){b.init.call(this,d,'<span class="binary-operator">'+e+"</span>",c)}}),af=a8(ah,function(a){a.init=ab.prototype.init,a.respace=function(){return this.jQ[0].className=this[aQ]?this[aQ] instanceof ah&&this[aV]&&!(this[aV] instanceof ah)?"unary-operator":"binary-operator":"",this}}),ak["+"]=a6(af,"+","+"),ak["–"]=ak["-"]=a6(af,"-","&minus;"),ak["±"]=ak.pm=ak.plusmn=ak.plusminus=a6(af,"\\pm ","&plusmn;"),ak.mp=ak.mnplus=ak.minusplus=a6(af,"\\mp ","&#8723;"),aC["*"]=ak.sdot=ak.cdot=a6(ah,"\\cdot ","&middot;"),ak["="]=a6(ah,"=","="),ak["<"]=a6(ah,"<","&lt;"),ak[">"]=a6(ah,">","&gt;"),ak.notin=ak.sim=ak.cong=ak.equiv=ak.oplus=ak.otimes=a8(ah,function(a,b){a.init=function(c){b.init.call(this,"\\"+c+" ","&"+c+";")}}),ak.times=a6(ah,"\\times ","&times;","[x]"),ak["÷"]=ak.div=ak.divide=ak.divides=a6(ah,"\\div ","&divide;","[/]"),ak["≠"]=ak.ne=ak.neq=a6(ah,"\\ne ","&ne;"),ak.ast=ak.star=ak.loast=ak.lowast=a6(ah,"\\ast ","&lowast;"),ak.therefor=ak.therefore=a6(ah,"\\therefore ","&there4;"),ak.cuz=ak.because=a6(ah,"\\because ","&#8757;"),ak.prop=ak.propto=a6(ah,"\\propto ","&prop;"),ak["≈"]=ak.asymp=ak.approx=a6(ah,"\\approx ","&asymp;"),ak.lt=a6(ah,"<","&lt;"),ak.gt=a6(ah,">","&gt;"),ak["≤"]=ak.le=ak.leq=a6(ah,"\\le ","&le;"),ak["≥"]=ak.ge=ak.geq=a6(ah,"\\ge ","&ge;"),ak.isin=ak["in"]=a6(ah,"\\in ","&isin;"),ak.ni=ak.contains=a6(ah,"\\ni ","&ni;"),ak.notni=ak.niton=ak.notcontains=ak.doesnotcontain=a6(ah,"\\not\\ni ","&#8716;"),ak.sub=ak.subset=a6(ah,"\\subset ","&sub;"),ak.sup=ak.supset=ak.superset=a6(ah,"\\supset ","&sup;"),ak.nsub=ak.notsub=ak.nsubset=ak.notsubset=a6(ah,"\\not\\subset ","&#8836;"),ak.nsup=ak.notsup=ak.nsupset=ak.notsupset=ak.nsuperset=ak.notsuperset=a6(ah,"\\not\\supset ","&#8837;"),ak.sube=ak.subeq=ak.subsete=ak.subseteq=a6(ah,"\\subseteq ","&sube;"),ak.supe=ak.supeq=ak.supsete=ak.supseteq=ak.supersete=ak.superseteq=a6(ah,"\\supseteq ","&supe;"),ak.nsube=ak.nsubeq=ak.notsube=ak.notsubeq=ak.nsubsete=ak.nsubseteq=ak.notsubsete=ak.notsubseteq=a6(ah,"\\not\\subseteq ","&#8840;"),ak.nsupe=ak.nsupeq=ak.notsupe=ak.notsupeq=ak.nsupsete=ak.nsupseteq=ak.notsupsete=ak.notsupseteq=ak.nsupersete=ak.nsuperseteq=ak.notsupersete=ak.notsuperseteq=a6(ah,"\\not\\supseteq ","&#8841;"),ba=a8(aN,function(a,b){a.init=function(c,d){b.init.call(this,c,"<big>"+d+"</big>")}}),ak["∑"]=ak.sum=ak.summation=a6(ba,"\\sum ","&sum;"),ak["∏"]=ak.prod=ak.product=a6(ba,"\\prod ","&prod;"),ak.coprod=ak.coproduct=a6(ba,"\\coprod ","&#8720;"),ak["∫"]=ak["int"]=ak.integral=a6(ba,"\\int ","&int;"),ak.N=ak.naturals=ak.Naturals=a6(ab,"\\mathbb{N}","&#8469;"),ak.P=ak.primes=ak.Primes=ak.projective=ak.Projective=ak.probability=ak.Probability=a6(ab,"\\mathbb{P}","&#8473;"),ak.Z=ak.integers=ak.Integers=a6(ab,"\\mathbb{Z}","&#8484;"),ak.Q=ak.rationals=ak.Rationals=a6(ab,"\\mathbb{Q}","&#8474;"),ak.R=ak.reals=ak.Reals=a6(ab,"\\mathbb{R}","&#8477;"),ak.C=ak.complex=ak.Complex=ak.complexes=ak.Complexes=ak.complexplane=ak.Complexplane=ak.ComplexPlane=a6(ab,"\\mathbb{C}","&#8450;"),ak.H=ak.Hamiltonian=ak.quaternions=ak.Quaternions=a6(ab,"\\mathbb{H}","&#8461;"),ak.quad=ak.emsp=a6(ab,"\\quad ","    "),ak.qquad=a6(ab,"\\qquad ","        "),ak.diamond=a6(ab,"\\diamond ","&#9671;"),ak.bigtriangleup=a6(ab,"\\bigtriangleup ","&#9651;"),ak.ominus=a6(ab,"\\ominus ","&#8854;"),ak.uplus=a6(ab,"\\uplus ","&#8846;"),ak.bigtriangledown=a6(ab,"\\bigtriangledown ","&#9661;"),ak.sqcap=a6(ab,"\\sqcap ","&#8851;"),ak.triangleleft=a6(ab,"\\triangleleft ","&#8882;"),ak.sqcup=a6(ab,"\\sqcup ","&#8852;"),ak.triangleright=a6(ab,"\\triangleright ","&#8883;"),ak.odot=a6(ab,"\\odot ","&#8857;"),ak.bigcirc=a6(ab,"\\bigcirc ","&#9711;"),ak.dagger=a6(ab,"\\dagger ","&#0134;"),ak.ddagger=a6(ab,"\\ddagger ","&#135;"),ak.wr=a6(ab,"\\wr ","&#8768;"),ak.amalg=a6(ab,"\\amalg ","&#8720;"),ak.models=a6(ab,"\\models ","&#8872;"),ak.prec=a6(ab,"\\prec ","&#8826;"),ak.succ=a6(ab,"\\succ ","&#8827;"),ak.preceq=a6(ab,"\\preceq ","&#8828;"),ak.succeq=a6(ab,"\\succeq ","&#8829;"),ak.simeq=a6(ab,"\\simeq ","&#8771;"),ak.mid=a6(ab,"\\mid ","&#8739;"),ak.ll=a6(ab,"\\ll ","&#8810;"),ak.gg=a6(ab,"\\gg ","&#8811;"),ak.parallel=a6(ab,"\\parallel ","&#8741;"),ak.bowtie=a6(ab,"\\bowtie ","&#8904;"),ak.sqsubset=a6(ab,"\\sqsubset ","&#8847;"),ak.sqsupset=a6(ab,"\\sqsupset ","&#8848;"),ak.smile=a6(ab,"\\smile ","&#8995;"),ak.sqsubseteq=a6(ab,"\\sqsubseteq ","&#8849;"),ak.sqsupseteq=a6(ab,"\\sqsupseteq ","&#8850;"),ak.doteq=a6(ab,"\\doteq ","&#8784;"),ak.frown=a6(ab,"\\frown ","&#8994;"),ak.vdash=a6(ab,"\\vdash ","&#8870;"),ak.dashv=a6(ab,"\\dashv ","&#8867;"),ak.longleftarrow=a6(ab,"\\longleftarrow ","&#8592;"),ak.longrightarrow=a6(ab,"\\longrightarrow ","&#8594;"),ak.Longleftarrow=a6(ab,"\\Longleftarrow ","&#8656;"),ak.Longrightarrow=a6(ab,"\\Longrightarrow ","&#8658;"),ak.longleftrightarrow=a6(ab,"\\longleftrightarrow ","&#8596;"),ak.updownarrow=a6(ab,"\\updownarrow ","&#8597;"),ak.Longleftrightarrow=a6(ab,"\\Longleftrightarrow ","&#8660;"),ak.Updownarrow=a6(ab,"\\Updownarrow ","&#8661;"),ak.mapsto=a6(ab,"\\mapsto ","&#8614;"),ak.nearrow=a6(ab,"\\nearrow ","&#8599;"),ak.hookleftarrow=a6(ab,"\\hookleftarrow ","&#8617;"),ak.hookrightarrow=a6(ab,"\\hookrightarrow ","&#8618;"),ak.searrow=a6(ab,"\\searrow ","&#8600;"),ak.leftharpoonup=a6(ab,"\\leftharpoonup ","&#8636;"),ak.rightharpoonup=a6(ab,"\\rightharpoonup ","&#8640;"),ak.swarrow=a6(ab,"\\swarrow ","&#8601;"),ak.leftharpoondown=a6(ab,"\\leftharpoondown ","&#8637;"),ak.rightharpoondown=a6(ab,"\\rightharpoondown ","&#8641;"),ak.nwarrow=a6(ab,"\\nwarrow ","&#8598;"),ak.ldots=a6(ab,"\\ldots ","&#8230;"),ak.cdots=a6(ab,"\\cdots ","&#8943;"),ak.vdots=a6(ab,"\\vdots ","&#8942;"),ak.ddots=a6(ab,"\\ddots ","&#8944;"),ak.surd=a6(ab,"\\surd ","&#8730;"),ak.triangle=a6(ab,"\\triangle ","&#9653;"),ak.ell=a6(ab,"\\ell ","&#8467;"),ak.top=a6(ab,"\\top ","&#8868;"),ak.flat=a6(ab,"\\flat ","&#9837;"),ak.natural=a6(ab,"\\natural ","&#9838;"),ak.sharp=a6(ab,"\\sharp ","&#9839;"),ak.wp=a6(ab,"\\wp ","&#8472;"),ak.bot=a6(ab,"\\bot ","&#8869;"),ak.clubsuit=a6(ab,"\\clubsuit ","&#9827;"),ak.diamondsuit=a6(ab,"\\diamondsuit ","&#9826;"),ak.heartsuit=a6(ab,"\\heartsuit ","&#9825;"),ak.spadesuit=a6(ab,"\\spadesuit ","&#9824;"),ak.oint=a6(ab,"\\oint ","&#8750;"),ak.bigcap=a6(ab,"\\bigcap ","&#8745;"),ak.bigcup=a6(ab,"\\bigcup ","&#8746;"),ak.bigsqcup=a6(ab,"\\bigsqcup ","&#8852;"),ak.bigvee=a6(ab,"\\bigvee ","&#8744;"),ak.bigwedge=a6(ab,"\\bigwedge ","&#8743;"),ak.bigodot=a6(ab,"\\bigodot ","&#8857;"),ak.bigotimes=a6(ab,"\\bigotimes ","&#8855;"),ak.bigoplus=a6(ab,"\\bigoplus ","&#8853;"),ak.biguplus=a6(ab,"\\biguplus ","&#8846;"),ak.lfloor=a6(ab,"\\lfloor ","&#8970;"),ak.rfloor=a6(ab,"\\rfloor ","&#8971;"),ak.lceil=a6(ab,"\\lceil ","&#8968;"),ak.rceil=a6(ab,"\\rceil ","&#8969;"),ak.slash=a6(ab,"\\slash ","&#47;"),ak.opencurlybrace=a6(ab,"\\opencurlybrace ","&#123;"),ak.closecurlybrace=a6(ab,"\\closecurlybrace ","&#125;"),ak.caret=a6(ab,"\\caret ","^"),ak.underscore=a6(ab,"\\underscore ","_"),ak.backslash=a6(ab,"\\backslash ","\\"),ak.vert=a6(ab,"|"),ak.perp=ak.perpendicular=a6(ab,"\\perp ","&perp;"),ak.nabla=ak.del=a6(ab,"\\nabla ","&nabla;"),ak.hbar=a6(ab,"\\hbar ","&#8463;"),ak.AA=ak.Angstrom=ak.angstrom=a6(ab,"\\text\\AA ","&#8491;"),ak.ring=ak.circ=ak.circle=a6(ab,"\\circ ","&#8728;"),ak.bull=ak.bullet=a6(ab,"\\bullet ","&bull;"),ak.setminus=ak.smallsetminus=a6(ab,"\\setminus ","&#8726;"),ak.not=ak["¬"]=ak.neg=a6(ab,"\\neg ","&not;"),ak["…"]=ak.dots=ak.ellip=ak.hellip=ak.ellipsis=ak.hellipsis=a6(ab,"\\dots ","&hellip;"),ak.converges=ak.darr=ak.dnarr=ak.dnarrow=ak.downarrow=a6(ab,"\\downarrow ","&darr;"),ak.dArr=ak.dnArr=ak.dnArrow=ak.Downarrow=a6(ab,"\\Downarrow ","&dArr;"),ak.diverges=ak.uarr=ak.uparrow=a6(ab,"\\uparrow ","&uarr;"),ak.uArr=ak.Uparrow=a6(ab,"\\Uparrow ","&uArr;"),ak.to=a6(ah,"\\to ","&rarr;"),ak.rarr=ak.rightarrow=a6(ab,"\\rightarrow ","&rarr;"),ak.implies=a6(ah,"\\Rightarrow ","&rArr;"),ak.rArr=ak.Rightarrow=a6(ab,"\\Rightarrow ","&rArr;"),ak.gets=a6(ah,"\\gets ","&larr;"),ak.larr=ak.leftarrow=a6(ab,"\\leftarrow ","&larr;"),ak.impliedby=a6(ah,"\\Leftarrow ","&lArr;"),ak.lArr=ak.Leftarrow=a6(ab,"\\Leftarrow ","&lArr;"),ak.harr=ak.lrarr=ak.leftrightarrow=a6(ab,"\\leftrightarrow ","&harr;"),ak.iff=a6(ah,"\\Leftrightarrow ","&hArr;"),ak.hArr=ak.lrArr=ak.Leftrightarrow=a6(ab,"\\Leftrightarrow ","&hArr;"),ak.Re=ak.Real=ak.real=a6(ab,"\\Re ","&real;"),ak.Im=ak.imag=ak.image=ak.imagin=ak.imaginary=ak.Imaginary=a6(ab,"\\Im ","&image;"),ak.part=ak.partial=a6(ab,"\\partial ","&part;"),ak.inf=ak.infin=ak.infty=ak.infinity=a6(ab,"\\infty ","&infin;"),ak.alef=ak.alefsym=ak.aleph=ak.alephsym=a6(ab,"\\aleph ","&alefsym;"),ak.xist=ak.xists=ak.exist=ak.exists=a6(ab,"\\exists ","&exist;"),ak.and=ak.land=ak.wedge=a6(ab,"\\wedge ","&and;"),ak.or=ak.lor=ak.vee=a6(ab,"\\vee ","&or;"),ak.o=ak.O=ak.empty=ak.emptyset=ak.oslash=ak.Oslash=ak.nothing=ak.varnothing=a6(ah,"\\varnothing ","&empty;"),ak.cup=ak.union=a6(ah,"\\cup ","&cup;"),ak.cap=ak.intersect=ak.intersection=a6(ah,"\\cap ","&cap;"),ak.deg=ak.degree=a6(ab,"^\\circ ","&deg;"),ak.ang=ak.angle=a6(ab,"\\angle ","&ang;"),aa=a8(aN,function(a,b){a.init=function(c){b.init.call(this,"\\"+c+" ","<span>"+c+"</span>")},a.respace=function(){this.jQ[0].className=this[aV] instanceof aD||this[aV] instanceof aq?"":"non-italicized-function"}}),ak.ln=ak.lg=ak.log=ak.span=ak.proj=ak.det=ak.dim=ak.min=ak.max=ak.mod=ak.lcm=ak.gcd=ak.gcf=ak.hcf=ak.lim=aa,function(){var a,b=["sin","cos","tan","sec","cosec","csc","cotan","cot"];for(a in b){ak[b[a]]=ak[b[a]+"h"]=ak["a"+b[a]]=ak["arc"+b[a]]=ak["a"+b[a]+"h"]=ak["arc"+b[a]+"h"]=aa}}(),aI=function(){function p(a){var b=a1();return a.adopt(b,0,0),b}function F(a){var b,c=a[0]||a1();for(b=1;a.length>b;b+=1){a[b].children().adopt(c,c.ends[aV],0)}return c}var z=aZ.string,B=aZ.regex,x=aZ.letter,q=aZ.any,J=aZ.optWhitespace,y=aZ.succeed,H=aZ.fail,C=x.map(ad),l=B(/^[^${}\\_^]/).map(ab),E=B(/^[^\\a-eg-zA-Z]/).or(z("\\").then(B(/^[a-z]+/i).or(B(/^\s+/).result(" ")).or(q))).then(function(a){var b=ak[a];return b?b(a).parser():H("unknown command: \\"+a)}),G=E.or(C).or(l),A=z("{").then(function(){return I}).skip(z("}")),D=J.then(A.or(G.map(p))),I=D.many().map(F).skip(J),k=z("[").then(D.then(function(a){return"]"!==a.join("latex")?y(a):H()}).many().map(F).skip(J)).skip(z("]")),j=I;return j.block=D,j.optBlock=k,j}(),aM=a8(a7,function(a){function c(h,l){var g,k,j,f;if(h[aV][l]){h.insAtLeftEnd(h[aV][l])}else{if(h[aQ][l]){h.insAtRightEnd(h[aQ][l])}else{g=h.parent;do{if(k=g[l],k&&("function"==typeof k&&(k=g[l](h)),k===!1||k instanceof a1)){h.upDownCache[g.id]=a7(h.parent,h[aQ],h[aV]),k instanceof a1&&(j=h.upDownCache[k.id],j?j[aV]?h.insLeftOf(j[aV]):h.insAtRightEnd(j.parent):(f=d(h).left,h.insAtRightEnd(k),h.seekHoriz(f,k)));break}g=g.parent.parent}while(g)}}return h.clearSelection().show()}function d(f){var g=f.jQ.removeClass("cursor").offset();return f.jQ.addClass("cursor"),g}function b(e){e.upDownCache={}}a.init=function(f){this.parent=this.root=f;var g=this.jQ=this._jQ=a5('<span class="cursor">&zwj;</span>');this.blink=function(){g.toggleClass("blink")},this.upDownCache={}},a.show=function(){return this.jQ=this._jQ.removeClass("blink"),"intervalId" in this?clearInterval(this.intervalId):(this[aV]?this.selection&&this.selection.ends[aQ][aQ]===this[aQ]?this.jQ.insertBefore(this.selection.jQ):this.jQ.insertBefore(this[aV].jQ.first()):this.jQ.appendTo(this.parent.jQ),this.parent.focus()),this.intervalId=setInterval(this.blink,500),this},a.hide=function(){return"intervalId" in this&&clearInterval(this.intervalId),delete this.intervalId,this.jQ.detach(),this.jQ=a5(),this},a.withDirInsertAt=function(g,j,k,f){var h=this.parent;this.parent=j,this[g]=k,this[-g]=f,h.blur()},a.insDirOf=function(f,g){return a2(f),this.withDirInsertAt(f,g.parent,g[f],g),this.parent.jQ.addClass("hasCursor"),this.jQ.insDirOf(f,g.jQ),this},a.insLeftOf=function(e){return this.insDirOf(aQ,e)},a.insRightOf=function(e){return this.insDirOf(aV,e)},a.insAtDirEnd=function(f,g){return a2(f),this.withDirInsertAt(f,g,0,g.ends[f]),f===aQ&&g.textarea?this.jQ.insDirOf(-f,g.textarea):this.jQ.insAtDirEnd(f,g.jQ),g.focus(),this},a.insAtLeftEnd=function(e){return this.insAtDirEnd(aQ,e)},a.insAtRightEnd=function(e){return this.insAtDirEnd(aV,e)},a.hopDir=function(e){return a2(e),this.jQ.insDirOf(e,this[e].jQ),this[-e]=this[e],this[e]=this[e][e],this},a.hopLeft=function(){return this.hopDir(aQ)},a.hopRight=function(){return this.hopDir(aV)},a.moveDirWithin=function(f,g){if(a2(f),this[f]){this[f].ends[-f]?this.insAtDirEnd(-f,this[f].ends[-f]):this.hopDir(f)}else{if(this.parent===g){return}this.parent[f]?this.insAtDirEnd(-f,this.parent[f]):this.insDirOf(f,this.parent.parent)}},a.moveLeftWithin=function(e){return this.moveDirWithin(aQ,e)},a.moveRightWithin=function(e){return this.moveDirWithin(aV,e)},a.moveDir=function(e){return a2(e),b(this),this.selection?this.insDirOf(e,this.selection.ends[e]).clearSelection():this.moveDirWithin(e,this.root),this.show()},a.moveLeft=function(){return this.moveDir(aQ)},a.moveRight=function(){return this.moveDir(aV)},a.moveUp=function(){return c(this,"up")},a.moveDown=function(){return c(this,"down")},a.seek=function(g,j){b(this);var k,f,h=this.clearSelection().show();return g.hasClass("empty")?(h.insAtLeftEnd(aP[g.attr(aH)]),h):(k=aP[g.attr(aJ)],k instanceof aN?(g.outerWidth()>2*(j-g.offset().left)?h.insLeftOf(k):h.insRightOf(k),h):(k||(f=aP[g.attr(aH)],f||(g=g.parent(),k=aP[g.attr(aJ)],k||(f=aP[g.attr(aH)],f||(f=h.root)))),k?h.insRightOf(k):h.insAtRightEnd(f),h.seekHoriz(j,h.root)))},a.seekHoriz=function(g,k){var f,j=this,h=d(j).left-g;do{j.moveLeftWithin(k),f=h,h=d(j).left-g}while(h>0&&(j[aQ]||j.parent!==k));return -h>f&&j.moveRightWithin(k),j},a.writeLatex=function(g){var j,k,f,h=this;return b(h),h.show().deleteSelection(),j=aZ.all,k=aZ.eof,f=aI.skip(k).or(j.result(!1)).parse(g),f&&(f.children().adopt(h.parent,h[aQ],h[aV]),aP.jQize(f.join("html")).insertBefore(h.jQ),h[aQ]=f.ends[aV],f.finalizeInsert(),h.parent.bubble("redraw")),this.hide()},a.write=function(f){var g=this.prepareWrite();return this.insertCh(f,g)},a.insertCh=function(f,g){return this.parent.write(this,f,g),this},a.insertCmd=function(f,g){var h=ak[f];return h?(h=h(f),g&&h.replaces(g),h.createLeftOf(this)):(h=at(),h.replaces(f),h.ends[aQ].focus=function(){return delete this.focus,this},h.createLeftOf(this),this.insRightOf(h),g&&g.remove()),this},a.unwrapGramp=function(){var g=this.parent.parent,h=g.parent,j=g[aV],f=g[aQ];if(g.disown().eachChild(function(e){e.isEmpty()||(e.children().adopt(h,f,j).each(function(i){i.jQ.insertBefore(g.jQ.first())}),f=e.ends[aV])}),!this[aV]){if(this[aQ]){this[aV]=this[aQ][aV]}else{for(;!this[aV];){if(this.parent=this.parent[aV],!this.parent){this[aV]=g[aV],this.parent=h;break}this[aV]=this.parent.ends[aQ]}}}this[aV]?this.insLeftOf(this[aV]):this.insAtRightEnd(h),g.jQ.remove(),g[aQ]&&g[aQ].respace(),g[aV]&&g[aV].respace()},a.deleteDir=function(e){if(a2(e),b(this),this.show(),this.deleteSelection()){}else{if(this[e]){this[e].isEmpty()?this[e]=this[e].remove()[e]:this.selectDir(e)}else{if(this.parent!==this.root){if(this.parent.parent.isEmpty()){return this.insDirOf(-e,this.parent.parent).deleteDir(e)}this.unwrapGramp()}}}return this[aQ]&&this[aQ].respace(),this[aV]&&this[aV].respace(),this.parent.bubble("redraw"),this},a.backspace=function(){return this.deleteDir(aQ)},a.deleteForward=function(){return this.deleteDir(aV)},a.selectFrom=function(p){var k,h,j,f,q,m,g=this,l=p;p:for(;;){for(k=this;k!==g.parent.parent;k=k.parent.parent){if(k.parent===l.parent){j=k,f=l;break p}}for(h=p;h!==l.parent.parent;h=h.parent.parent){if(g.parent===h.parent){j=g,f=h;break p}}g.parent.parent&&(g=g.parent.parent),l.parent.parent&&(l=l.parent.parent)}if(j[aV]!==f){for(m=j;m;m=m[aV]){if(m===f[aQ]){q=!0;break}}q||(q=f,f=j,j=q)}this.hide().selection=aF(j[aQ][aV]||j.parent.ends[aQ],f[aV][aQ]||f.parent.ends[aV]),this.insRightOf(f[aV][aQ]||f.parent.ends[aV]),this.root.selectionChanged()},a.selectDir=function(e){if(a2(e),b(this),this.selection){if(this.selection.ends[e]===this[-e]){this[e]?this.hopDir(e).selection.extendDir(e):this.parent!==this.root&&this.insDirOf(e,this.parent.parent).selection.levelUp()}else{if(this.hopDir(e),this.selection.ends[e]===this.selection.ends[-e]){return this.clearSelection().show(),bb}this.selection.retractDir(e)}}else{if(this[e]){this.hopDir(e)}else{if(this.parent===this.root){return}this.insDirOf(e,this.parent.parent)}this.hide().selection=aF(this[-e])}this.root.selectionChanged()},a.selectLeft=function(){return this.selectDir(aQ)},a.selectRight=function(){return this.selectDir(aV)},a.prepareMove=function(){return b(this),this.show().clearSelection()},a.prepareEdit=function(){return b(this),this.show().deleteSelection()},a.prepareWrite=function(){return b(this),this.show().replaceSelection()},a.clearSelection=function(){return this.selection&&(this.selection.clear(),delete this.selection,this.root.selectionChanged()),this},a.deleteSelection=function(){return this.selection?(this[aQ]=this.selection.ends[aQ][aQ],this[aV]=this.selection.ends[aV][aV],this.selection.remove(),this.root.selectionChanged(),delete this.selection):!1},a.replaceSelection=function(){var e=this.selection;return e&&(this[aQ]=e.ends[aQ][aQ],this[aV]=e.ends[aV][aV],delete this.selection),e}}),aF=a8(a0,function(a,b){a.init=function(){var c=this;b.init.apply(c,arguments),c.jQwrap(c.jQ)},a.jQwrap=function(c){this.jQ=c.wrapAll('<span class="selection"></span>').parent()},a.adopt=function(){return this.jQ.replaceWith(this.jQ=this.jQ.children()),b.adopt.apply(this,arguments)},a.clear=function(){return this.jQ.replaceWith(this.jQ.children()),this},a.levelUp=function(){var c=this,d=c.ends[aQ]=c.ends[aV]=c.ends[aV].parent.parent;return c.clear().jQwrap(d.jQ),c},a.extendDir=function(c){return a2(c),this.ends[c]=this.ends[c][c],this.ends[c].jQ.insAtDirEnd(c,this.jQ),this},a.extendLeft=function(){return this.extendDir(aQ)},a.extendRight=function(){return this.extendDir(aV)},a.retractDir=function(c){a2(c),this.ends[-c].jQ.insDirOf(-c,this.jQ),this.ends[-c]=this.ends[-c][c]},a.retractRight=function(){return this.retractDir(aV)},a.retractLeft=function(){return this.retractDir(aQ)}}),aA.fn.mathquill=function(d,g){var j,c,f,b,h;switch(d){case"redraw":return this.each(function(){var a=a5(this).attr(aH),i=a&&aP[a];i&&function k(e){e.eachChild(k),e.redraw&&e.redraw()}(i)});case"revert":return this.each(function(){var a=a5(this).attr(aH),i=a&&aP[a];i&&i.revert&&i.revert()});case"latex":return arguments.length>1?this.each(function(){var a=a5(this).attr(aH),e=a&&aP[a];e&&e.renderLatex(g)}):(j=a5(this).attr(aH),c=j&&aP[j],c&&c.latex());case"text":return j=a5(this).attr(aH),c=j&&aP[j],c&&c.text();case"html":return this.html().replace(/ ?hasCursor|hasCursor /,"").replace(/ class=(""|(?= |>))/g,"").replace(/<span class="?cursor( blink)?"?><\/span>/i,"").replace(/<span class="?textarea"?><textarea><\/textarea><\/span>/i,"");case"write":if(arguments.length>1){return this.each(function(){var e=a5(this).attr(aH),k=e&&aP[e],a=k&&k.cursor;a&&a.writeLatex(g).parent.blur()})}case"cmd":if(arguments.length>1){return this.each(function(){var e,l=a5(this).attr(aH),a=l&&aP[l],k=a&&a.cursor;k&&(e=k.prepareWrite(),/^\\[a-z]+$/i.test(g)?k.insertCmd(g.slice(1),e):k.insertCh(g,e),k.hide().parent.blur())})}default:return f="textbox"===d,b=f||"editable"===d,h=f?am:aU,this.each(function(){aT(a5(this),h(),f,b)})}},aA(function(){aA(".mathquill-editable:not(.mathquill-rendered-math)").mathquill("editable"),aA(".mathquill-textbox:not(.mathquill-rendered-math)").mathquill("textbox"),aA(".mathquill-embedded-latex").mathquill()})})();